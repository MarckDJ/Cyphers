<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
            integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
            crossorigin="anonymous"
        />
        <title>cripto</title>
    </head>
    <body>
        <nav class="navbar navbar-dark bg-primary">
            <span class="navbar-brand mb-0 h1">Cifrados AES / DES</span>
        </nav>
        <div class="jumbotron">
            <%if(typeof wrn != "undefined"){%>
            <p class="lead"><%=wrn%></p>
            <%}else{%>
            <input id="msg" value="<%= msg%>" hidden />
            <input id="fName" value="<%= name%>" hidden />
            <input id="op" value="<%= op%>" hidden />
            <p class="lead">Su archivo se descargara en breve...</p>
            <script>
                var fileEnc = new Blob([document.getElementById("msg").value]); // Create blob from string

                var a = document.createElement("a");
                var url = window.URL.createObjectURL(fileEnc);
                var filename =
                    String(document.getElementById("fName").value)
                        .replace(".txt", "")
                        .replace("_enc" || "_dec", "") +
                    document.getElementById("op").value +
                    ".txt";
                a.href = url;
                a.download = filename;
                a.click();
                window.URL.revokeObjectURL(url);
            </script>
            <%}%>
            <hr class="my-4" />
            <a class="btn btn-primary btn-lg" href="/">Volver</a>
        </div>
    </body>
</html>
